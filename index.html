<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>jQuery.promises</title>
    <meta name="description" content="jQuery.promises: A collection of little scripts that use jQuery.Deferred for cleaner, encapsulated flow control">
    <meta name="author" content="Dharmafly">

    <!-- HTML5 shim -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  </head>

  <body>

    <!-- Navbar -->

    <div class="navbar navbar-fixed">
      <div class="navbar-inner">
        <div class="fluid-container">
          <a class="brand" href="#">jQuery.promises</a>
          <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#docs">Documentation</a></li>
            <li><a href="https://github.com/dharmafly/jquery.promises">Download</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Container -->

    <div class="fluid-container sidebar-left">
      <div class="fluid-sidebar">
        <div class="well side-nav">
          <h5 class="nav-label"><a class="nav-item" href="#overview">Overview</a></h5>

          <h5 class="nav-label"><a href="#image">jQuery.promises.image</a></h5>
          <ul class="nav-group">
            <li><a class="nav-item" href="#image-example-1">example #1</a></li>
            <li><a class="nav-item" href="#image-example-2">example #2</a></li>
            <li><a class="nav-item" href="#image-example-3">example #3</a></li>
          </ul>

          <h5 class="nav-label"><a href="#timer">jQuery.promises.timer</a></h5>
          <ul class="nav-group">
            <li><a class="nav-item" href="#timer-example-1">example #1</a></li>
            <li><a class="nav-item" href="#timer-example-2">example #2</a></li>
            <li><a class="nav-item" href="#timer-example-3">example #3</a></li>
          </ul>
        </div>
      </div>
      <div class="fluid-content">

        <!-- Project introduction-->
        <div class="hero-unit">
          <h1 id="overview">Hello, world!</h1>
          <p>Vestibulum id ligula porta felis euismod semper. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
          <p><a class="btn primary large" href="https://github.com/dharmafly/jquery.promises">GitHub repo &raquo;</a></p>
        </div>
   
        <!-- jQuery.promises.image -->
        <h2 id="image">jQuery.promises.image</h2>
        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>

        <section id="image-example-1">
          <h3>Example #1</h3>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <div class="code-example"><pre>jQuery.promises.image("http://farm3.staticflickr.com/2188/2219660409_21ba876f98_m.jpg")
    .then(
        function(img){
            jQuery(img).appendTo(document.body);
        },
        function(){
            alert("Image failed to load");
        }
    );</pre></div>

            <section class="result">
              <button class="btn run-code" href="#">Run &raquo;</button> </br> </br>
              Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            </section>
          </section>

        <section id="image-example-2">
          <h3>Example #2</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
            <div class="code-example"><pre>jQuery.when(
      jQuery.promises.image("http://farm3.staticflickr.com/2188/2219660409_21ba876f98_m.jpg"),
      jQuery.promises.image("http://farm3.staticflickr.com/2102/2183461799_beff4bb413_m.jpg"),
      jQuery.get("../demo/example.json")
  )   
  .then(
      function(img1, img2, json){
          jQuery(document.body)
              .append(img1)
              .append(img2)
              .append("&lt;code>" + json[0].foo + "&lt;/code>");
      },
      function(){
          alert("Something failed to load");
      }
  );</pre></div>

            <section class="result">
              <button class="btn run-code" href="#">Run &raquo;</button> </br> </br>
              Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            </section>
          </section>
        
        <section id="image-example-3">
          <h3>Example #3</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <div class="code-example"><pre>jQuery.promises.image(
      [
          "http://farm3.staticflickr.com/2188/2219660409_21ba876f98_m.jpg",
          "http://farm3.staticflickr.com/2102/2183461799_beff4bb413_m.jpg",
          "http://farm1.staticflickr.com/73/175573986_f5073bfcb0_m.jpg"
      ],
      
      // Success callback - called if all images load successfully
      // image elements are passed as arguments in the same order as above
      function(){
          jQuery(arguments)
              .hide()
              .appendTo(document.body)
              .fadeIn(1000);
      },
      
      // Fail callback - called if one or more images fail to load
      function(){
          alert("An image failed to load");
      }
  );</pre></div>

            <section class="result">
              <button class="btn run-code" href="#">Run &raquo;</button> </br> </br>
              Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            </section>
          </section>


        <!-- jQuery.promises.timer -->
          <h2 id="timer">jQuery.promises.timer</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>


          <section id="timer-example-1">
            <h3 id="jQuery.promises.timer-ex1">Example #1</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <div class="code-example"><pre>jQuery.promises.timer(
      // milliseconds
      500,
      
      // Success callback
      function(){
          alert("Success!");
      },

      // Fail callback
      function(){
          alert("Error!");
      }
  );</pre></div>

            <section class="result">
              <button class="btn run-code" href="#">Run &raquo;</button> </br> </br>
              Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            </section>
          </section>
          
          <section id="timer-example-2">
            <h3>Example #2</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <div class="code-example"><pre>var bodyElem = jQuery("body"),
      flag = window.flagBg;
      
  jQuery.promises.timer(
      // milliseconds
      500,
      
      // Success callback
      function(){
          // Toggle body background-colour from white to green
          bodyElem.css({
              backgroundColor: flag ?
                  "#fff" : "#afa"
          });
          
          window.flagBg = !flag
      },

      // Fail callback
      function(){
          alert("Error");
      }
  );</pre></div>

            <section class="result">
              <button class="btn run-code" href="#">Run &raquo;</button> </br> </br>
              Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            </section>
          </section>

          <section id="timer-example-3">
            <h3 id="jQuery.promises.timer-ex3">Example #3</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <div class="code-example"><pre>var images = [
          "http://farm3.staticflickr.com/2188/2219660409_21ba876f98_m.jpg",
          "http://farm3.staticflickr.com/2102/2183461799_beff4bb413_m.jpg",
          "http://farm1.staticflickr.com/73/175573986_f5073bfcb0_m.jpg"
      ],
      current = 0;

  function loadAndDisplay(src){
      jQuery.when(
          jQuery.promises.image(src),
          jQuery.promises.timer(1000)
      )
      .then(
          function(img){
              // Display the image
              jQuery(img)
                  .hide()
                  .fadeIn(500, function(){
                      // Once faded in, load next image
                      current ++;
                      
                      // Reset loop to first image
                      if (current >= images.length){
                          current = 0;
                      }
                      
                      // Load and display the next image
                      loadAndDisplay(images[current]);
                  });
                  
              jQuery("#result").html(img);
          },
      
          function(){
              alert("Error");
          }
      );
  }

  loadAndDisplay(images[current]);</pre></div>

            <section class="result">
              <button class="btn run-code" href="#">Run &raquo;</button> </br> </br>
              Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.
            </section>
          </section>

        </div> <!-- /container -->
      </div>
    </div>
	
	<!-- jQuery + jQuery.promises -->
	<script src="js/jquery.js"></script>
    <script src="https://raw.github.com/dharmafly/jquery.promises/master/image.js"></script>
    <script src="https://raw.github.com/dharmafly/jquery.promises/master/timer.js"></script>

	<!-- Demo code snippets -->
    <script src="js/ace/ace.js"></script>
    <script src="js/ace/theme/theme-monokai.js"></script>
    <script src="js/ace/mode-javascript.js"></script>
    <script src="js/demo.js"></script>
  </body>
</html>
